<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./Logo_do_Buenozilla_1.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
    <title>Arthur (Buenozilla) Barata</title>
</head>
<body>
    <header>
        <div>
            <img src="./Logo_do_Buenozilla_1.png" alt="Logo Buenozilla">
        </div>
        <ul>
            <li>
                <a href="https://github.com/baratarthur" target="_blank" rel="noopener noreferrer">
                    github
                </a>
            </li>
            <li>
                <a href="mailto:arthurpbarata@gmail.com" target="_blank" rel="noopener noreferrer">
                    email me
                </a>
            </li>
            <li>
                <a href="https://wa.me/61992573332" target="_blank" rel="noopener noreferrer">
                    me mande uma mensagem
                </a>
            </li>
        </ul>
    </header>
    <main>
        <section class="container">
            <div class="name">
                <h1>Arthur (Buenozilla) Barata</h1>
                <h5>Computer Engineer</h5>
            </div>

            <div id="github-info"></div>

            <h3>Alguns dos meus repositórios favoritos:</h3>

            <div id="github-repos"></div>

            <div id="arrow" onclick="displayAbout()">
                <i id="animation" class="fas fa-sort-down" ></i>
            </div>

            <div id="about">
                <p>
                    Desenvolvedor web que sempre buscou aprender o que há de novo nesse mundo da tecnologia. <br/>
                    Acredito que o conhecimento pode mudar o mundo, por isso sempre compartilho o que sei. <br/>
                    Sou competitivo e estou me desafiando o tempo todo, seja no mundo dos esportes, nos games ou até mesmo hackatons. <br/>
                    Gosto de tudo que envolve a área de TI, portanto fique a vontade para me chamar no Linkedin para conversar sobre novas tendências.
                </p>
            </div>

            <div class="form">
                <div>
                    <p>Deixe seu contato!</p>
                </div>
                <form action="">
                    <input type="text" placeholder="seu melhor email :)">
                    <button>enviar!</button>
                </form>
            </div>
        </section>
    </main>
    <script>
        function displayAbout() {
            var arrow = document.getElementById('animation');
            arrow.classList.toggle('rotate');

            var about = document.getElementById('about');
            about.classList.toggle('active');
        }

        (async function fetchGithubUserData() {
            const url = 'https://api.github.com/users/baratarthur';
            const favoriteRepos = [
                'tdd-bdd-jasmine-cucumber',
                'tcc-api',
                'hiring-coders-css-project',
                'green-footprint',
                'projetos_java'
            ];


            const [ profileRequest, reposRequest ] = await Promise.all([
                fetch(url),
                fetch(url + '/repos')
            ]);

            const [ profileJson, reposJson ] = await Promise.all([
                profileRequest.json(),
                reposRequest.json()
            ]);

            const githubDiv = document.getElementById('github-info');
            
            const image = document.createElement('img');
            image.src = profileJson.avatar_url;
            image.alt = "Github user info"
            githubDiv.appendChild(image);

            const paragraph = document.createElement('p');
            paragraph.className = "github-description";
            paragraph.innerText = '"'+ profileJson.bio +'"'
            githubDiv.appendChild(paragraph);


            const startOnGithubDate = new Date(profileJson.created_at);
            const dateParagraph = document.createElement('p');
            dateParagraph.className = 'github-sice';
            dateParagraph.innerText = 'Desde ' + startOnGithubDate.toLocaleDateString('pt-br') + ' no github!'
            githubDiv.appendChild(dateParagraph);

            const githubReposDiv = document.getElementById('github-repos');

            reposJson.filter(repo => favoriteRepos.includes(repo.name))
                .map(async (repo) => {
                    const repoDiv = document.createElement('div');
                    repoDiv.classList.add('github-repo');

                    const repoAnchor = document.createElement('a');
                    repoAnchor.href = repo.html_url;
                    repoAnchor.target = "_blank";
                    repoAnchor.innerText = repo.name;
                    repoDiv.appendChild(repoAnchor);

                    const repoLanguagesReq = await fetch(repo.languages_url);
                    const languages = await repoLanguagesReq.json();
                    const repoLanguages = document.createElement('p');
                    repoLanguages.className = 'languages-list';
                    repoLanguages.innerText = Object.keys(languages)[0] + (
                        Object.keys(languages).slice(1).length > 0 ?
                            ', '.concat(Object.keys(languages).slice(1))
                            : ''
                    );
                    repoDiv.appendChild(repoLanguages);

                    const repoDate = document.createElement('p');
                    const repoStartDate = new Date(repo.created_at);
                    repoDate.className = 'repo-start-date';
                    repoDate.innerText = 'Criado em ' + repoStartDate.toLocaleDateString('pt-br');
                    repoDiv.appendChild(repoDate);

                    githubReposDiv.appendChild(repoDiv)
                });
        })()
    </script>
</body>
</html>